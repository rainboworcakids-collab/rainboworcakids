<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines | Rainbow OrcaKids</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- SweetAlert2 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dialog ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Color Picker -->
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/nano.min.css" />
    
</head>

<body class="font-sarabun bg-gray-50">
    <!-- Navigation ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢ nav.js -->
    
    <div class="container mx-auto px-4 py-8">

        <!-- Header -->
        <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
            <div>
                <h1 class="text-3xl font-bold text-blue-700 mb-2">
                    <i class="fas fa-book-open mr-3"></i>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines
                </h1>
                <p class="text-gray-600">‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
            </div>
            
            <div class="flex gap-3">
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ Dashboard -->
                <a href="admin_dashboard.html" 
                   class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center transition duration-200">
                    <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                </a>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° Discipline ‡πÉ‡∏´‡∏°‡πà -->
                <button onclick="showAddDisciplineModal()" 
                        class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg flex items-center transition duration-200">
                    <i class="fas fa-plus mr-2"></i>‡πÄ‡∏û‡∏¥‡πà‡∏° Discipline ‡πÉ‡∏´‡∏°‡πà
                </button>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á Icon ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ -->
                <button onclick="showIconGuide()" 
                        class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg flex items-center transition duration-200">
                    <i class="fas fa-icons mr-2"></i>‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ Icons
                </button>
            </div>
        </div>

        <!-- Quick Guide -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <div class="flex items-start">
                <i class="fas fa-lightbulb text-yellow-500 text-xl mt-1 mr-3"></i>
                <div>
                    <h3 class="font-bold text-blue-800 mb-1">Disciplines ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?</h3>
                    <p class="text-sm text-blue-700">
                        Disciplines ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤/‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÄ‡∏ä‡πà‡∏ô <span class="font-semibold">‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå, ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå, ‡∏®‡∏¥‡∏•‡∏õ‡∏∞, ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢, ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</span> 
                        ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
                    </p>
                </div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-white p-4 rounded-lg shadow border border-blue-100">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-blue-100 text-blue-600 mr-4">
                        <i class="fas fa-book text-xl"></i>
                    </div>
                    <div>
                        <p class="text-gray-500 text-sm">‡∏£‡∏ß‡∏° Disciplines</p>
                        <p id="totalDisciplines" class="text-2xl font-bold">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white p-4 rounded-lg shadow border border-green-100">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-green-100 text-green-600 mr-4">
                        <i class="fas fa-check-circle text-xl"></i>
                    </div>
                    <div>
                        <p class="text-gray-500 text-sm">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà</p>
                        <p id="activeDisciplines" class="text-2xl font-bold">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white p-4 rounded-lg shadow border border-yellow-100">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4">
                        <i class="fas fa-pause-circle text-xl"></i>
                    </div>
                    <div>
                        <p class="text-gray-500 text-sm">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                        <p id="inactiveDisciplines" class="text-2xl font-bold">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white p-4 rounded-lg shadow border border-purple-100">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-purple-100 text-purple-600 mr-4">
                        <i class="fas fa-palette text-xl"></i>
                    </div>
                    <div>
                        <p class="text-gray-500 text-sm">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏™‡∏µ</p>
                        <p id="avgColorCount" class="text-2xl font-bold">0</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search and Filter -->
        <div class="bg-white p-4 rounded-lg shadow mb-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <div class="flex-1">
                    <div class="relative">
                        <input type="text" id="searchInput" 
                               placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤, ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢, ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô..."
                               class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <select id="statusFilter" 
                            class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="all">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        <option value="active">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà</option>
                        <option value="inactive">‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</option>
                    </select>
                    
                    <select id="sortBy" 
                            class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500">
                        <option value="display_order">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö</option>
                        <option value="name_th">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠</option>
                        <option value="created_at">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á</option>
                    </select>
                    
                    <button onclick="loadDisciplines()" 
                            class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center">
                        <i class="fas fa-sync-alt mr-2"></i>‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading -->
        <div id="loadingStatus" class="p-4 bg-yellow-50 rounded-lg border border-yellow-200 text-gray-700 mb-6">
            <i class="fas fa-spinner fa-spin mr-2"></i>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines...
        </div>

        <!-- Disciplines Table -->
        <div class="bg-white rounded-lg shadow overflow-hidden mb-8">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <i class="fas fa-sort mr-1"></i>‡∏•‡∏≥‡∏î‡∏±‡∏ö
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <i class="fas fa-id-card mr-1"></i>‡∏£‡∏´‡∏±‡∏™
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <i class="fas fa-book mr-1"></i>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <i class="fas fa-palette mr-1"></i>‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô & ‡∏™‡∏µ
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <i class="fas fa-toggle-on mr-1"></i>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <i class="fas fa-calendar mr-1"></i>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠
                            </th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <i class="fas fa-cogs mr-1"></i>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
                            </th>
                        </tr>
                    </thead>
                    <tbody id="disciplinesTableBody" class="bg-white divide-y divide-gray-200">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- No Data Message (hidden by default) -->
        <div id="noDataMessage" class="hidden text-center py-12">
            <i class="fas fa-inbox text-gray-300 text-5xl mb-4"></i>
            <h3 class="text-xl font-semibold text-gray-500 mb-2">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines</h3>
            <p class="text-gray-400 mb-6">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° Discipline ‡πÉ‡∏´‡∏°‡πà</p>
            <button onclick="showAddDisciplineModal()" 
                    class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg">
                <i class="fas fa-plus mr-2"></i>‡πÄ‡∏û‡∏¥‡πà‡∏° Discipline ‡πÉ‡∏´‡∏°‡πà
            </button>
        </div>

        <!-- Back Button -->
        <div class="text-center">
            <a href="admin_dashboard.html" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold">
                <i class="fas fa-arrow-left mr-2"></i>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Dashboard
            </a>
        </div>
    </div>

    <!-- Add/Edit Discipline Modal (hidden by default) -->
    <div id="disciplineModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white">
            <div class="flex justify-between items-center pb-3 border-b">
                <h3 id="modalTitle" class="text-2xl font-bold text-gray-700"></h3>
                <button onclick="closeDisciplineModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <div class="mt-6">
                <form id="disciplineForm" onsubmit="saveDiscipline(event)">
                    <input type="hidden" id="disciplineId">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Discipline ID -->
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-id-card mr-1"></i>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤ *
                            </label>
                            <input type="text" id="disciplineKey" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                   placeholder="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: math, science, art"
                                   required>
                            <p class="text-xs text-gray-500 mt-1">‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                        </div>

                        <!-- Display Order -->
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-sort-numeric-up mr-1"></i>‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• *
                            </label>
                            <input type="number" id="displayOrder" min="0" max="999"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                   required>
                        </div>

                        <!-- Thai Name -->
                        <div class="md:col-span-2">
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-font mr-1"></i>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤ (‡πÑ‡∏ó‡∏¢) *
                            </label>
                            <input type="text" id="disciplineNameTh" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                   placeholder="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå, ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå, ‡∏®‡∏¥‡∏•‡∏õ‡∏∞"
                                   required>
                        </div>

                        <!-- Icon Class -->
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-icons mr-1"></i>‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (Font Awesome)
                            </label>
                            <div class="flex items-center space-x-2">
                                <input type="text" id="iconClass" 
                                       class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                       placeholder="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: fas fa-calculator">
                                <button type="button" onclick="previewIcon()" 
                                        class="px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="mt-2">
                                <p id="iconPreview" class="text-2xl text-center text-gray-400">
                                    <i class="fas fa-question-circle"></i>
                                </p>
                                <p class="text-xs text-gray-500 mt-1">
                                    <a href="https://fontawesome.com/icons" target="_blank" class="text-blue-500 hover:underline">
                                        <i class="fas fa-external-link-alt mr-1"></i>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
                                    </a>
                                </p>
                            </div>
                        </div>

                        <!-- Color Code -->
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-palette mr-1"></i>‡∏™‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏™‡∏≤‡∏Ç‡∏≤
                            </label>
                            <div class="flex items-center space-x-2">
                                <input type="text" id="colorCode" 
                                       class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                       placeholder="#3B82F6 ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ">
                                <div id="colorPreview" class="w-10 h-10 rounded border border-gray-300"></div>
                            </div>
                            <div class="mt-2">
                                <p class="text-xs text-gray-500">
                                    <button type="button" onclick="openColorPicker()" class="text-blue-500 hover:underline mr-3">
                                        <i class="fas fa-eye-dropper mr-1"></i>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ
                                    </button>
                                    <button type="button" onclick="suggestColor()" class="text-blue-500 hover:underline">
                                        <i class="fas fa-magic mr-1"></i>‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏µ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                                    </button>
                                </p>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="md:col-span-2">
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-align-left mr-1"></i>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
                            </label>
                            <textarea id="description" rows="3"
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                      placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ..."></textarea>
                        </div>

                        <!-- Status -->
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-toggle-on mr-1"></i>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
                            </label>
                            <div class="flex items-center space-x-4 mt-2">
                                <label class="flex items-center">
                                    <input type="radio" name="isActive" value="true" checked
                                           class="mr-2 text-blue-600 focus:ring-blue-500">
                                    <span class="text-green-600">
                                        <i class="fas fa-check-circle mr-1"></i>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
                                    </span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="isActive" value="false"
                                           class="mr-2 text-blue-600 focus:ring-blue-500">
                                    <span class="text-red-600">
                                        <i class="fas fa-times-circle mr-1"></i>‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Common Icons Suggestions -->
                    <div class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h4 class="font-bold text-gray-700 mb-2 text-sm">
                            <i class="fas fa-lightbulb mr-1"></i>‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤:
                        </h4>
                        <div class="grid grid-cols-3 md:grid-cols-6 gap-2 text-xs">
                            <button type="button" onclick="setIcon('fas fa-calculator')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-calculator text-blue-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-flask')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-flask text-green-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-paint-brush')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-paint-brush text-purple-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏®‡∏¥‡∏•‡∏õ‡∏∞</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-book')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-book text-red-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-globe')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-globe text-yellow-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-music')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-music text-pink-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏î‡∏ô‡∏ï‡∏£‡∏µ</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-running')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-running text-orange-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏Å‡∏µ‡∏¨‡∏≤</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-laptop-code')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-laptop-code text-indigo-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-brain')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-brain text-teal-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏ï‡∏£‡∏£‡∏Å‡∏∞</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-history')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-history text-gray-500 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-map')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-map text-green-600 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</div>
                            </button>
                            <button type="button" onclick="setIcon('fas fa-users')" class="p-2 bg-white rounded border hover:bg-blue-50 text-center">
                                <i class="fas fa-users text-blue-600 text-lg mb-1"></i>
                                <div class="text-gray-600">‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>
                            </button>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="flex justify-end space-x-3 mt-8 pt-4 border-t">
                        <button type="button" onclick="closeDisciplineModal()"
                                class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                        <button type="submit" id="submitButton"
                                class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center">
                            <i class="fas fa-save mr-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Color Picker (hidden) -->
    <div id="colorPickerContainer" class="hidden"></div>

    <!-- Scripts -->
    <script src="js/supabase-config.js"></script>
    <script src="js/auth_status_manager.js"></script>
    <script src="js/nav.js"></script>
    
    <!-- Debug Logger -->
    <script src="js/debug-logger.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            console.log("üîê Checking admin permission for this page...");
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå admin
            const hasPermission = await checkAdminPermission();
            
            if (!hasPermission) {
                // Redirect ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ dashboard
                Swal.fire({
                    icon: 'warning',
                    title: '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á',
                    text: '‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô',
                    confirmButtonText: '‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Dashboard',
                    allowOutsideClick: false,
                    allowEscapeKey: false
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = 'admin_dashboard.html';
                    }
                });
                return;
            }
            
            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å
            loadPageContent();
        });

        // ===============================================
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö admin permission
        // ===============================================
        async function checkAdminPermission() {
            try {
                console.log("üîç Checking admin permission...");
                
                const supabase = await getSupabaseClient();
                if (!supabase) {
                    console.error("‚ùå Supabase client not available");
                    return false;
                }
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö session
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                if (sessionError) {
                    console.error("‚ùå Session error:", sessionError);
                    return false;
                }
                
                if (!session || !session.user) {
                    console.warn("‚ö†Ô∏è No user session found");
                    return false;
                }
                
                console.log("üë§ User logged in:", session.user.email);
                
                // ‡πÉ‡∏ä‡πâ fetchUserProfile
                if (typeof window.fetchUserProfile !== 'function') {
                    console.error("‚ùå fetchUserProfile function not available");
                    return false;
                }
                
                const profile = await window.fetchUserProfile(session.user);
                console.log("üìä User profile:", profile);
                
                if (!profile) {
                    console.error("‚ùå Cannot fetch user profile");
                    return false;
                }
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ role ‡πÄ‡∏õ‡πá‡∏ô admin ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                const isAdmin = profile.role === 'admin' || 
                               profile.role === 'administrator' || 
                               profile.role === 'superadmin';
                
                if (isAdmin) {
                    console.log("‚úÖ Admin permission granted");
                } else {
                    console.warn("‚ö†Ô∏è User is not an admin, role:", profile.role);
                }
                
                return isAdmin;
                
            } catch (error) {
                console.error("‚ùå Error in checkAdminPermission:", error);
                return false;
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å
        async function loadPageContent() {
            console.log("‚úÖ Admin permission verified, loading page content...");
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Event Listeners
            document.getElementById('searchInput').addEventListener('keyup', filterDisciplines);
            document.getElementById('statusFilter').addEventListener('change', filterDisciplines);
            document.getElementById('sortBy').addEventListener('change', filterDisciplines);
            
            // Setup icon preview
            document.getElementById('iconClass').addEventListener('input', previewIcon);
            document.getElementById('colorCode').addEventListener('input', previewColor);
            
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines
            await loadDisciplines();
            
            // Initialize Debug Logger
            initDebugLogger();
        }

        // ===============================================
        // Disciplines Management JavaScript
        // ===============================================
        let currentDisciplines = [];
        let isEditMode = false;
        let colorPicker = null;
        
        // Debug Logger wrapper functions
        function logSuccess(message) {
            if (window.DebugLogger && typeof window.DebugLogger.success === 'function') {
                window.DebugLogger.success(message);
            } else {
                console.log('‚úÖ ' + message);
            }
        }
        
        function logError(message) {
            if (window.DebugLogger && typeof window.DebugLogger.error === 'function') {
                window.DebugLogger.error(message);
            } else {
                console.error('‚ùå ' + message);
            }
        }
        
        function logInfo(message) {
            if (window.DebugLogger && typeof window.DebugLogger.info === 'function') {
                window.DebugLogger.info(message);
            } else {
                console.info('‚ÑπÔ∏è ' + message);
            }
        }
        
        function logWarning(message) {
            if (window.DebugLogger && typeof window.DebugLogger.warning === 'function') {
                window.DebugLogger.warning(message);
            } else {
                console.warn('‚ö†Ô∏è ' + message);
            }
        }
        
        // Fallback Debug Logger
        if (!window.DebugLogger) {
            console.log('‚ö†Ô∏è DebugLogger not found, using fallback logger');
            window.DebugLogger = {
                init: function() { console.log('Fallback DebugLogger initialized'); },
                log: function(msg, type) { 
                    const icon = type === 'success' ? '‚úÖ' : 
                                type === 'error' ? '‚ùå' : 
                                type === 'warning' ? '‚ö†Ô∏è' : 
                                type === 'info' ? 'üîµ' : 'üìù';
                    console.log(`${icon} ${msg}`);
                },
                success: function(msg) { console.log('‚úÖ ' + msg); },
                error: function(msg) { console.error('‚ùå ' + msg); },
                warning: function(msg) { console.warn('‚ö†Ô∏è ' + msg); },
                info: function(msg) { console.info('‚ÑπÔ∏è ' + msg); },
                debug: function(msg) { console.debug('üêõ ' + msg); }
            };
        }
        
        function initDebugLogger() {
            if (window.DebugLogger && typeof window.DebugLogger.init === 'function') {
                try {
                    window.DebugLogger.init();
                    console.log('‚úÖ DebugLogger initialized');
                } catch (e) {
                    console.warn('‚ö†Ô∏è DebugLogger init failed:', e);
                }
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏µ
        function setIcon(iconClass) {
            document.getElementById('iconClass').value = iconClass;
            previewIcon();
        }
        
        function previewIcon() {
            const iconClass = document.getElementById('iconClass').value;
            const previewElement = document.getElementById('iconPreview');
            
            if (iconClass && iconClass.trim() !== '') {
                previewElement.innerHTML = `<i class="${iconClass}"></i>`;
                previewElement.className = 'text-2xl text-center text-blue-600';
            } else {
                previewElement.innerHTML = '<i class="fas fa-question-circle"></i>';
                previewElement.className = 'text-2xl text-center text-gray-400';
            }
        }
        
        function previewColor() {
            const colorCode = document.getElementById('colorCode').value;
            const previewElement = document.getElementById('colorPreview');
            
            if (colorCode && colorCode.trim() !== '') {
                previewElement.style.backgroundColor = colorCode;
                previewElement.style.borderColor = '#d1d5db';
            } else {
                previewElement.style.backgroundColor = '#f3f4f6';
                previewElement.style.borderColor = '#d1d5db';
            }
        }
        
        function openColorPicker() {
            if (!colorPicker) {
                colorPicker = Pickr.create({
                    el: document.getElementById('colorPickerContainer'),
                    theme: 'nano',
                    default: '#3B82F6',
                    swatches: [
                        '#EF4444', '#F97316', '#F59E0B', '#10B981',
                        '#06B6D4', '#3B82F6', '#8B5CF6', '#EC4899',
                        '#6B7280', '#000000'
                    ],
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,
                        interaction: {
                            hex: true,
                            rgba: true,
                            input: true,
                            save: true
                        }
                    }
                });
                
                colorPicker.on('save', (color, instance) => {
                    if (color) {
                        const hexColor = color.toHEXA().toString();
                        document.getElementById('colorCode').value = hexColor;
                        previewColor();
                        colorPicker.hide();
                    }
                });
            }
            
            // Show color picker
            const container = document.getElementById('colorPickerContainer');
            container.classList.remove('hidden');
            colorPicker.show();
        }
        
        function suggestColor() {
            // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡∏à‡∏≤‡∏Å‡∏ä‡∏∏‡∏î‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
            const suggestedColors = [
                '#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6',
                '#06B6D4', '#EC4899', '#84CC16', '#F97316', '#6366F1'
            ];
            
            const randomColor = suggestedColors[Math.floor(Math.random() * suggestedColors.length)];
            document.getElementById('colorCode').value = randomColor;
            previewColor();
        }
        
        function showIconGuide() {
            Swal.fire({
                title: '‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Font Awesome',
                html: `
                    <div class="text-left">
                        <h4 class="font-bold text-blue-700 mb-3">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô:</h4>
                        <ul class="list-disc pl-5 space-y-2 mb-4">
                            <li><strong>fas fa-icon-name</strong> - ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ó‡∏∂‡∏ö (Solid)</li>
                            <li><strong>far fa-icon-name</strong> - ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏£‡πà‡∏≤‡∏á (Regular)</li>
                            <li><strong>fal fa-icon-name</strong> - ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ö‡∏≤‡∏á (Light)</li>
                            <li><strong>fab fa-icon-name</strong> - ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå (Brand)</li>
                        </ul>
                        
                        <h4 class="font-bold text-blue-700 mb-2">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°:</h4>
                        <div class="grid grid-cols-4 gap-2 text-xs">
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-book text-lg mb-1 text-blue-500"></i>
                                <div>fa-book</div>
                            </div>
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-calculator text-lg mb-1 text-green-500"></i>
                                <div>fa-calculator</div>
                            </div>
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-flask text-lg mb-1 text-purple-500"></i>
                                <div>fa-flask</div>
                            </div>
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-paint-brush text-lg mb-1 text-red-500"></i>
                                <div>fa-paint-brush</div>
                            </div>
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-music text-lg mb-1 text-yellow-500"></i>
                                <div>fa-music</div>
                            </div>
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-globe text-lg mb-1 text-indigo-500"></i>
                                <div>fa-globe</div>
                            </div>
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-brain text-lg mb-1 text-teal-500"></i>
                                <div>fa-brain</div>
                            </div>
                            <div class="p-2 bg-gray-50 rounded text-center">
                                <i class="fas fa-laptop-code text-lg mb-1 text-gray-700"></i>
                                <div>fa-laptop-code</div>
                            </div>
                        </div>
                        
                        <p class="mt-4 text-sm text-gray-600">
                            <i class="fas fa-external-link-alt mr-1"></i>
                            <a href="https://fontawesome.com/icons" target="_blank" class="text-blue-500 hover:underline">
                                ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
                            </a>
                        </p>
                    </div>
                `,
                width: 600,
                confirmButtonText: '‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß'
            });
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines ‡∏à‡∏≤‡∏Å Supabase
        async function loadDisciplines() {
            const loadingStatus = document.getElementById('loadingStatus');
            const noDataMessage = document.getElementById('noDataMessage');
            const tableBody = document.getElementById('disciplinesTableBody');
            
            loadingStatus.classList.remove('hidden');
            tableBody.innerHTML = '';
            
            try {
                const supabase = await getSupabaseClient();
                if (!supabase) {
                    showError('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ');
                    return;
                }
                
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• disciplines ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° display_order
                const { data: disciplines, error } = await supabase
                    .from('disciplines')
                    .select('*')
                    .order('display_order', { ascending: true });
                
                if (error) throw error;
                
                currentDisciplines = disciplines || [];
                
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
                updateStats(currentDisciplines);
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
                if (currentDisciplines.length > 0) {
                    renderDisciplinesTable(currentDisciplines);
                    noDataMessage.classList.add('hidden');
                } else {
                    tableBody.innerHTML = '';
                    noDataMessage.classList.remove('hidden');
                }
                
                loadingStatus.classList.add('hidden');
                
                logSuccess(`‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${currentDisciplines.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`);
                
            } catch (error) {
                loadingStatus.classList.add('hidden');
                showError('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines ‡πÑ‡∏î‡πâ: ' + error.message);
                logError('Error loading disciplines: ' + error.message);
            }
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        function renderDisciplinesTable(disciplines) {
            const tableBody = document.getElementById('disciplinesTableBody');
            tableBody.innerHTML = '';
            
            // ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° dropdown
            const sortBy = document.getElementById('sortBy').value;
            let sortedDisciplines = [...disciplines];
            
            if (sortBy === 'name_th') {
                sortedDisciplines.sort((a, b) => a.name_th.localeCompare(b.name_th, 'th'));
            } else if (sortBy === 'created_at') {
                sortedDisciplines.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
            } else {
                // display_order (default)
                sortedDisciplines.sort((a, b) => a.display_order - b.display_order);
            }
            
            sortedDisciplines.forEach((discipline, index) => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50 transition-colors';
                
                // ‡∏ü‡∏≠‡∏£‡πå‡πÅ‡∏°‡∏ï‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
                const createdDate = new Date(discipline.created_at).toLocaleDateString('th-TH', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á badge ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏µ
                let colorBadge = '';
                if (discipline.color_code) {
                    colorBadge = `
                        <div class="inline-block w-4 h-4 rounded-full border border-gray-300 mr-2" 
                             style="background-color: ${discipline.color_code}"></div>
                        <span class="text-xs font-mono">${discipline.color_code}</span>
                    `;
                } else {
                    colorBadge = '<span class="text-gray-400 text-xs">-</span>';
                }
                
                // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏µ
                let iconDisplay = '';
                if (discipline.icon_class) {
                    iconDisplay = `
                        <div class="flex items-center space-x-3">
                            <div class="flex items-center justify-center w-8 h-8 rounded-lg" 
                                 style="background-color: ${discipline.color_code || '#f3f4f6'}">
                                <i class="${discipline.icon_class} text-white"></i>
                            </div>
                            <div>
                                ${colorBadge}
                                <div class="text-xs text-gray-500 mt-1">${discipline.icon_class || '-'}</div>
                            </div>
                        </div>
                    `;
                } else {
                    iconDisplay = '<span class="text-gray-400">-</span>';
                }
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">
                        ${discipline.display_order}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800">
                            ${discipline.discipline_id}
                        </span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900">${discipline.name_th}</div>
                        <div class="text-sm text-gray-500 truncate max-w-xs">${discipline.description || '-'}</div>
                    </td>
                    <td class="px-6 py-4">
                        ${iconDisplay}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full ${discipline.is_active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                            ${discipline.is_active ? '‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô' : '‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô'}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <i class="far fa-clock mr-1"></i>${createdDate}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="editDiscipline('${discipline.discipline_id}')" 
                                class="text-blue-600 hover:text-blue-900 mr-3" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="deleteDiscipline('${discipline.discipline_id}', '${discipline.name_th}')" 
                                class="text-red-600 hover:text-red-900" title="‡∏•‡∏ö">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
        function updateStats(disciplines) {
            const total = disciplines.length;
            const active = disciplines.filter(d => d.is_active).length;
            const inactive = total - active;
            
            // ‡∏ô‡∏±‡∏ö disciplines ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏µ
            const withColor = disciplines.filter(d => d.color_code && d.color_code.trim() !== '').length;
            const avgColorCount = total > 0 ? Math.round((withColor / total) * 100) : 0;
            
            document.getElementById('totalDisciplines').textContent = total;
            document.getElementById('activeDisciplines').textContent = active;
            document.getElementById('inactiveDisciplines').textContent = inactive;
            document.getElementById('avgColorCount').textContent = `${avgColorCount}%`;
        }

        // ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Disciplines
        function filterDisciplines() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            
            let filtered = currentDisciplines;
            
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            if (searchTerm) {
                filtered = filtered.filter(discipline => 
                    discipline.discipline_id.toLowerCase().includes(searchTerm) ||
                    discipline.name_th.toLowerCase().includes(searchTerm) ||
                    discipline.description?.toLowerCase().includes(searchTerm) ||
                    discipline.icon_class?.toLowerCase().includes(searchTerm) ||
                    discipline.color_code?.toLowerCase().includes(searchTerm)
                );
            }
            
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            if (statusFilter !== 'all') {
                filtered = filtered.filter(discipline => 
                    statusFilter === 'active' ? discipline.is_active : !discipline.is_active
                );
            }
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏≤‡∏° dropdown
            const sortBy = document.getElementById('sortBy').value;
            if (sortBy === 'name_th') {
                filtered.sort((a, b) => a.name_th.localeCompare(b.name_th, 'th'));
            } else if (sortBy === 'created_at') {
                filtered.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
            } else {
                // display_order (default)
                filtered.sort((a, b) => a.display_order - b.display_order);
            }
            
            renderDisciplinesTable(filtered);
        }

        // ‡πÅ‡∏™‡∏î‡∏á Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° Discipline
        function showAddDisciplineModal() {
            isEditMode = false;
            document.getElementById('modalTitle').textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏° Discipline ‡πÉ‡∏´‡∏°‡πà';
            document.getElementById('submitButton').innerHTML = '<i class="fas fa-save mr-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('disciplineForm').reset();
            document.getElementById('disciplineId').value = '';
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ display order ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
            const maxOrder = currentDisciplines.length > 0 ? Math.max(...currentDisciplines.map(d => d.display_order)) : 0;
            document.getElementById('displayOrder').value = maxOrder + 1;
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ default color
            document.getElementById('colorCode').value = '#3B82F6';
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï preview
            previewIcon();
            previewColor();
            
            // ‡πÅ‡∏™‡∏î‡∏á Modal
            document.getElementById('disciplineModal').classList.remove('hidden');
        }

        // ‡πÅ‡∏™‡∏î‡∏á Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Discipline
        async function editDiscipline(disciplineId) {
            const discipline = currentDisciplines.find(d => d.discipline_id === disciplineId);
            if (!discipline) {
                showError('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Discipline ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç');
                return;
            }
            
            isEditMode = true;
            document.getElementById('modalTitle').textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Discipline';
            document.getElementById('submitButton').innerHTML = '<i class="fas fa-save mr-2"></i>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
            
            // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
            document.getElementById('disciplineId').value = discipline.discipline_id;
            document.getElementById('disciplineKey').value = discipline.discipline_id;
            document.getElementById('disciplineKey').readOnly = true; // ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç key ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            document.getElementById('displayOrder').value = discipline.display_order;
            document.getElementById('disciplineNameTh').value = discipline.name_th;
            document.getElementById('iconClass').value = discipline.icon_class || '';
            document.getElementById('colorCode').value = discipline.color_code || '#3B82F6';
            document.getElementById('description').value = discipline.description || '';
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            const activeRadio = document.querySelector(`input[name="isActive"][value="${discipline.is_active}"]`);
            if (activeRadio) {
                activeRadio.checked = true;
            }
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï preview
            previewIcon();
            previewColor();
            
            // ‡πÅ‡∏™‡∏î‡∏á Modal
            document.getElementById('disciplineModal').classList.remove('hidden');
        }

        // ‡∏õ‡∏¥‡∏î Modal
        function closeDisciplineModal() {
            document.getElementById('disciplineModal').classList.add('hidden');
            document.getElementById('disciplineKey').readOnly = false; // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç key ‡πÉ‡∏´‡∏°‡πà
            
            // ‡∏õ‡∏¥‡∏î color picker ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
            if (colorPicker) {
                colorPicker.hide();
                document.getElementById('colorPickerContainer').classList.add('hidden');
            }
        }

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Discipline
        async function saveDiscipline(event) {
            event.preventDefault();
            
            try {
                const supabase = await getSupabaseClient();
                if (!supabase) {
                    showError('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ');
                    return;
                }
                
                const disciplineData = {
                    discipline_id: document.getElementById('disciplineKey').value.trim(),
                    name_th: document.getElementById('disciplineNameTh').value.trim(),
                    display_order: parseInt(document.getElementById('displayOrder').value),
                    icon_class: document.getElementById('iconClass').value.trim() || null,
                    color_code: document.getElementById('colorCode').value.trim() || null,
                    description: document.getElementById('description').value.trim() || null,
                    is_active: document.querySelector('input[name="isActive"]:checked').value === 'true'
                };
                
                const disciplineId = document.getElementById('disciplineId').value;
                
                let result;
                if (isEditMode && disciplineId) {
                    // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    const { data, error } = await supabase
                        .from('disciplines')
                        .update(disciplineData)
                        .eq('discipline_id', disciplineId)
                        .select();
                    
                    if (error) throw error;
                    result = data[0];
                    
                    logSuccess(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Discipline ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${disciplineData.name_th}`);
                    
                } else {
                    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
                    const { data, error } = await supabase
                        .from('disciplines')
                        .insert([disciplineData])
                        .select();
                    
                    if (error) throw error;
                    result = data[0];
                    
                    logSuccess(`‡πÄ‡∏û‡∏¥‡πà‡∏° Discipline ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${disciplineData.name_th}`);
                }
                
                // ‡∏õ‡∏¥‡∏î Modal ‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                closeDisciplineModal();
                await loadDisciplines();
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                Swal.fire({
                    icon: 'success',
                    title: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                    text: `‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Discipline "${disciplineData.name_th}" ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`,
                    timer: 2000,
                    showConfirmButton: false
                });
                
            } catch (error) {
                console.error('Error saving discipline:', error);
                
                if (error.code === '23505') { // Unique violation
                    showError('‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏∑‡πà‡∏ô');
                } else {
                    showError('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message);
                }
                
                logError('Error saving discipline: ' + error.message);
            }
        }

        // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Discipline
        async function deleteDiscipline(disciplineId, disciplineName) {
            // ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö
            const result = await Swal.fire({
                title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö',
                text: `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö Discipline "${disciplineName}" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: '‡πÉ‡∏ä‡πà, ‡∏•‡∏ö‡πÄ‡∏•‡∏¢!',
                cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            });
            
            if (!result.isConfirmed) return;
            
            try {
                const supabase = await getSupabaseClient();
                if (!supabase) {
                    showError('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ');
                    return;
                }
                
                const { error } = await supabase
                    .from('disciplines')
                    .delete()
                    .eq('discipline_id', disciplineId);
                
                if (error) throw error;
                
                logSuccess(`‡∏•‡∏ö Discipline ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${disciplineName}`);
                
                // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                await loadDisciplines();
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                Swal.fire({
                    icon: 'success',
                    title: '‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                    text: `‡∏•‡∏ö Discipline "${disciplineName}" ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß`,
                    timer: 2000,
                    showConfirmButton: false
                });
                
            } catch (error) {
                console.error('Error deleting discipline:', error);
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Discipline ‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                if (error.code === '23503') { // Foreign key violation
                    showError('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö Discipline ‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏µ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ô‡∏µ‡πâ)');
                } else {
                    showError('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message);
                }
                
                logError('Error deleting discipline: ' + error.message);
            }
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function showError(message) {
            Swal.fire({
                icon: 'error',
                title: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',
                text: message,
                confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á'
            });
        }
    </script>
    
    <style>
        /* Custom styles */
        .hover-scale {
            transition: transform 0.2s ease-in-out;
        }
        .hover-scale:hover {
            transform: translateY(-2px);
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            ring: 2px;
        }
        
        /* Scrollbar styling */
        #disciplinesTableBody::-webkit-scrollbar {
            width: 6px;
        }
        
        #disciplinesTableBody::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        #disciplinesTableBody::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        
        #disciplinesTableBody::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Color picker positioning */
        .pickr {
            position: absolute;
            z-index: 100;
        }
    </style>
</body>
</html>