<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Psychomatrix - RainbowOrcaKids</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/PsychomatrixStyle.css">
    
    <!-- Favicon -->
    <link rel="icon" href="images/PsychomatixAnalize.png" type="image/png">
    
    <!-- Debug Logger (‡πÇ‡∏´‡∏•‡∏î‡∏Å‡πà‡∏≠‡∏ô) -->
    <script src="js/debug-logger.js"></script>
</head>
<body class="tw-bg-gray-100 tw-p-4">
    <!-- Status Bar ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô -->
    <div id="status-bar" class="tw-fixed tw-top-0 tw-left-0 tw-right-0 tw-bg-gray-800 tw-text-white tw-p-2 tw-text-xs tw-z-50">
        <div class="tw-container tw-mx-auto tw-flex tw-justify-between">
            <div>
                <span id="status-text">üöÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö...</span>
                <span id="version" class="tw-ml-4 tw-text-gray-300">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô: result.html v1.0.1</span>
            </div>
            <div>
                <span id="load-time" class="tw-text-gray-300"></span>
            </div>
        </div>
    </div>
    
    <!-- Main Container -->
    <div class="tw-container tw-mx-auto tw-mt-10">
        <!-- Header -->
        <div class="tw-text-center tw-mb-6 tw-p-4 tw-bg-gradient-to-r tw-from-blue-600 tw-to-purple-600 tw-rounded-lg tw-shadow-lg">
            <h1 class="tw-text-3xl tw-font-bold tw-text-white tw-mb-2">üîÆ Psychomatrix Analysis</h1>
            <p class="tw-text-blue-100">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏û‡∏•‡∏±‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ï‡∏≤‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏Ç‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</p>
        </div>
        
        <!-- Debug Panel -->
        <div class="tw-bg-yellow-50 tw-border tw-border-yellow-200 tw-rounded-lg tw-p-4 tw-mb-6">
            <h3 class="tw-font-bold tw-text-yellow-800 tw-mb-2">Debug Panel (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)</h3>
            <div id="debug-panel" class="tw-text-sm tw-font-mono">
                <div class="tw-grid tw-grid-cols-2 tw-gap-4">
                    <div>
                        <strong>Timestamp:</strong> <span id="debug-time">-</span>
                    </div>
                    <div>
                        <strong>JavaScript:</strong> <span id="debug-js" class="tw-text-green-600">‚úÖ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</span>
                    </div>
                    <div>
                        <strong>SessionStorage:</strong> <span id="debug-session">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</span>
                    </div>
                    <div>
                        <strong>URL Params:</strong> <span id="debug-url">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tw-flex tw-border-b tw-border-gray-300">
            <button class="tablink active" onclick="switchTab('Main', this)">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
            <button class="tablink" onclick="switchTab('RawData', this)">Raw Data</button>
            <button class="tablink" onclick="switchTab('SQL', this)">SQL Results</button>
        </div>

        <!-- Main Tab -->
        <div id="Main" class="tabcontent active tw-bg-white tw-p-6 tw-rounded tw-shadow tw-mt-4">
            <h2 class="tw-text-2xl tw-font-bold tw-text-center tw-mb-6">
                ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Psychomatrix
            </h2>
            
            <div id="loading-message" class="tw-text-center tw-py-8">
                <div class="tw-inline-block tw-animate-spin tw-rounded-full tw-h-12 tw-w-12 tw-border-b-2 tw-border-blue-600"></div>
                <p class="tw-mt-4 tw-text-gray-600" id="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö...</p>
            </div>
            
            <div id="result-content" class="tw-hidden">
                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å render ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </div>
        </div>

        <!-- Raw Data Tab -->
        <div id="RawData" class="tabcontent tw-bg-gray-50 tw-p-6 tw-rounded tw-shadow tw-mt-4">
            <h3 class="tw-text-xl tw-font-bold tw-mb-4">Raw Data & Session Storage</h3>
            <pre id="raw-data-output" class="tw-bg-gray-900 tw-text-green-400 tw-p-4 tw-rounded tw-overflow-auto tw-max-h-96">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</pre>
        </div>

        <!-- SQL Tab -->
        <div id="SQL" class="tabcontent tw-bg-gray-900 tw-text-gray-100 tw-p-6 tw-rounded tw-shadow tw-mt-4">
            <h3 class="tw-text-xl tw-font-bold tw-mb-4">SQL Query Results</h3>
            <div id="sql-content">
                <pre class="tw-text-sm tw-whitespace-pre-wrap">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• SQL...</pre>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // ==================== VERSION & CONFIG ====================
        const VERSION = 'result.html v1.0.1';
        const BUILD_DATE = '2025-12-25 13:40';
        
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏ô status bar
        document.getElementById('version').textContent = `‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô: ${VERSION}`;
        document.getElementById('load-time').textContent = `‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤: ${new Date().toLocaleTimeString('th-TH')}`;
        document.getElementById('debug-time').textContent = new Date().toLocaleTimeString('th-TH');

        // ==================== DEBUG FUNCTIONS ====================
        function updateDebugPanel(key, value, isError = false) {
            const element = document.getElementById(`debug-${key}`);
            if (element) {
                element.textContent = value;
                element.className = isError ? 'tw-text-red-600' : 'tw-text-green-600';
            }
            DebugLogger.log(`DEBUG [${key}]: ${value}`);
        }

        function updateStatus(text, type = 'info') {
            const statusElement = document.getElementById('status-text');
            const colors = {
                'info': 'tw-text-white',
                'success': 'tw-text-green-300',
                'warning': 'tw-text-yellow-300',
                'error': 'tw-text-red-300'
            };
            
            statusElement.textContent = text;
            statusElement.className = colors[type] || 'tw-text-white';
            DebugLogger.log(`STATUS: ${text}`);
        }

        // ==================== INITIAL CHECKS ====================
        function performInitialChecks() {
            updateStatus('üîç ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö...', 'info');
            
            // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö JavaScript
            updateDebugPanel('js', '‚úÖ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥');
            
            // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SessionStorage
            try {
                const hasSession = sessionStorage.getItem('psychomatrixResult');
                updateDebugPanel('session', hasSession ? '‚úÖ ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•' : '‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', !hasSession);
            } catch (e) {
                updateDebugPanel('session', `‚ùå Error: ${e.message}`, true);
            }
            
            // 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL Parameters
            try {
                const params = new URLSearchParams(window.location.search);
                const hasParams = params.toString().length > 0;
                updateDebugPanel('url', hasParams ? '‚úÖ ‡∏û‡∏ö‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå' : '‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå', !hasParams);
            } catch (e) {
                updateDebugPanel('url', `‚ùå Error: ${e.message}`, true);
            }
            
            // 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Supabase Config
            try {
                if (typeof window.SUPABASE_URL === 'undefined') {
                    updateDebugPanel('supabase', '‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö config', true);
                } else {
                    updateDebugPanel('supabase', '‚úÖ ‡∏û‡∏ö config');
                }
            } catch (e) {
                updateDebugPanel('supabase', `‚ùå Error: ${e.message}`, true);
            }
            
            updateStatus('‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô', 'success');
        }

        // ==================== UTILITY FUNCTIONS ====================
        function switchTab(tabName, el) {
            document.querySelectorAll('.tabcontent').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tablink').forEach(link => link.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            el.classList.add('active');
        }

        // ==================== DATA FETCHING ====================
        async function fetchLifePathFromSupabase(rootNumber) {
            updateStatus(`üì° ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LifePath ${rootNumber}...`, 'info');
            
            try {
                // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ SUPABASE_URL ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ï‡∏£‡∏á‡πÜ
                const SUPABASE_URL = window.SUPABASE_URL || 'https://oibubvhuiuurkxhnefsw.supabase.co';
                const SUPABASE_ANON_KEY = window.SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9pYnVidmh1aXV1cmt4aG5lZnN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUwNTQ4NzksImV4cCI6MjA1MDYzMDg3OX0.lCwQjPY--EswBo8q4CxrSbGfLEqDvY2cM5y1CvKT1gY';
                
                const response = await fetch(
                    `${SUPABASE_URL}/rest/v1/numerology_search_index?` + 
                    `element_type=eq.LifePath&root_number=eq.${rootNumber}`,
                    {
                        headers: {
                            'apikey': SUPABASE_ANON_KEY,
                            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                            'Content-Type': 'application/json'
                        }
                    }
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                updateStatus(`‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LifePath ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`, 'success');
                return data[0];
            } catch (error) {
                updateStatus(`‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LifePath: ${error.message}`, 'error');
                return null;
            }
        }

        // ==================== RENDERING ====================
        function renderRawData() {
            try {
                const sessionData = sessionStorage.getItem('psychomatrixResult');
                const urlParams = new URLSearchParams(window.location.search);
                
                const rawData = {
                    version: VERSION,
                    timestamp: new Date().toISOString(),
                    sessionStorage: sessionData ? JSON.parse(sessionData) : '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                    urlParameters: Object.fromEntries(urlParams.entries()),
                    localStorageKeys: Object.keys(localStorage),
                    sessionStorageKeys: Object.keys(sessionStorage)
                };
                
                document.getElementById('raw-data-output').textContent = 
                    JSON.stringify(rawData, null, 2);
            } catch (error) {
                document.getElementById('raw-data-output').textContent = 
                    `ERROR: ${error.message}\n${error.stack}`;
            }
        }

        function renderTestResult() {
            updateStatus('üé® ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö...', 'info');
            
            // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
            const testData = {
                birth_date: "13:05 22/05/1968",
                birth_numbers: "130522051968",
                destiny_number: 42,
                destiny_number_reduced: 6,
                life_path_number: 6,
                life_path_meaning: "‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏™‡∏π‡∏á ‡∏£‡∏±‡∏Å‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß..."
            };
            
            const html = `
                <div class="tw-space-y-6">
                    <div class="tw-text-center tw-mb-8">
                        <h3 class="tw-text-2xl tw-font-bold tw-text-gray-800">‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î</h3>
                        <p class="tw-text-3xl tw-font-semibold tw-text-blue-600 tw-mt-2">
                            ${testData.birth_date}
                        </p>
                        <p class="tw-text-sm tw-text-gray-500 tw-mt-2">(‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö)</p>
                    </div>
                    
                    <div class="tw-grid md:tw-grid-cols-2 tw-gap-6">
                        <div class="tw-bg-blue-50 tw-border-2 tw-border-blue-200 tw-rounded-xl tw-p-6">
                            <h4 class="tw-text-lg tw-font-bold tw-text-blue-800">‡πÄ‡∏•‡∏Ç‡∏†‡∏≤‡∏£‡∏∞‡∏Å‡∏¥‡∏à (Destiny)</h4>
                            <div class="tw-flex tw-items-center tw-mt-4">
                                <div class="tw-text-5xl tw-font-bold tw-text-blue-600 tw-mr-4">
                                    ${testData.destiny_number}
                                </div>
                                <div>
                                    <p class="tw-text-gray-600">(‡∏•‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${testData.destiny_number_reduced})</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tw-bg-green-50 tw-border-2 tw-border-green-200 tw-rounded-xl tw-p-6">
                            <h4 class="tw-text-lg tw-font-bold tw-text-green-800">‡πÄ‡∏•‡∏Ç‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (Life Path)</h4>
                            <div class="tw-flex tw-items-center tw-mt-4">
                                <div class="tw-text-5xl tw-font-bold tw-text-green-600 tw-mr-4">
                                    ${testData.life_path_number}
                                </div>
                                <div>
                                    <p class="tw-text-sm tw-text-gray-500">‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tw-bg-yellow-50 tw-border-l-4 tw-border-yellow-400 tw-p-4 tw-rounded">
                        <h4 class="tw-font-bold tw-text-yellow-800">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï:</h4>
                        <p class="tw-text-gray-700">${testData.life_path_meaning}</p>
                    </div>
                    
                    <div class="tw-text-center">
                        <button onclick="loadRealData()" 
                                class="tw-bg-purple-500 hover:tw-bg-purple-600 tw-text-white tw-font-bold tw-py-3 tw-px-6 tw-rounded-lg">
                            üîÑ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Supabase
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('result-content').innerHTML = html;
            document.getElementById('loading-message').classList.add('tw-hidden');
            document.getElementById('result-content').classList.remove('tw-hidden');
            
            updateStatus('‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        }

        // ==================== MAIN INITIALIZATION ====================
        async function initializePage() {
            try {
                DebugLogger.log('=== STARTING RESULT PAGE ===');
                updateStatus('üöÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•...', 'info');
                document.getElementById('loading-text').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö...';
                
                // 1. ‡∏ó‡∏≥ initial checks
                performInitialChecks();
                
                // 2. ‡πÅ‡∏™‡∏î‡∏á raw data
                renderRawData();
                
                // 3. ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å sessionStorage
                const sessionData = sessionStorage.getItem('psychomatrixResult');
                
                if (sessionData) {
                    try {
                        const parsedData = JSON.parse(sessionData);
                        updateStatus('‚úÖ ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Psychomatrix.js', 'success');
                        document.getElementById('loading-text').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...';
                        
                        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á
                        await renderRealData(parsedData);
                    } catch (parseError) {
                        updateStatus('‚ùå ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sessionStorage ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
                        renderTestResult();
                    }
                } else {
                    updateStatus('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sessionStorage', 'warning');
                    document.getElementById('loading-text').textContent = '‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö...';
                    
                    // ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö
                    setTimeout(() => {
                        renderTestResult();
                    }, 1000);
                }
                
                DebugLogger.log('=== PAGE INITIALIZED SUCCESSFULLY ===');
                
            } catch (error) {
                DebugLogger.error(`FATAL ERROR: ${error.message}`);
                updateStatus(`‚ùå ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á: ${error.message}`, 'error');
                
                document.getElementById('loading-message').innerHTML = `
                    <div class="tw-text-red-500 tw-text-center">
                        <p class="tw-text-xl tw-font-bold">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á</p>
                        <p class="tw-mt-2">${error.message}</p>
                        <p class="tw-text-sm tw-mt-4">${error.stack}</p>
                        <a href="Psychomatrix.html" class="tw-inline-block tw-mt-4 tw-bg-blue-500 hover:tw-bg-blue-600 tw-text-white tw-font-bold tw-py-2 tw-px-4 tw-rounded">
                            ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏°
                        </a>
                    </div>
                `;
            }
        }

        // ==================== EVENT LISTENERS ====================
        document.addEventListener('DOMContentLoaded', () => {
            DebugLogger.log('üìÑ DOM Content Loaded');
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
            setTimeout(() => {
                initializePage();
            }, 500);
        });

        // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô global
        window.switchTab = switchTab;
        window.loadRealData = async function() {
            updateStatus('üîç ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Supabase...', 'info');
            
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LifePath 6 (‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
            const lifePathData = await fetchLifePathFromSupabase(6);
            
            if (lifePathData) {
                document.getElementById('sql-content').innerHTML = `
                    <div class="tw-bg-gray-800 tw-p-4 tw-rounded">
                        <h4 class="tw-text-green-400">‚úÖ ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LifePath 6</h4>
                        <pre class="tw-text-sm tw-whitespace-pre-wrap">${JSON.stringify(lifePathData, null, 2)}</pre>
                    </div>
                `;
                
                // ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏ó‡πá‡∏ö SQL
                switchTab('SQL', document.querySelector('[onclick*="SQL"]'));
                
                updateStatus('‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• SQL ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            }
        };

    </script>
</body>
</html>
