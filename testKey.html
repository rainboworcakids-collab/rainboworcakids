<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Test Psychomatrix API</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f0f0; }
        .container { background: white; padding: 20px; border-radius: 8px; max-width: 600px; margin: auto; }
        input, button { width: 100%; padding: 10px; margin: 10px 0; }
        button { background: #1a73e8; color: white; border: none; border-radius: 4px; }
        pre { background: #000; color: #0f0; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h2>üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Psychomatrix API</h2>
        
        <label>ANON Key:</label>
        <input type="password" id="anonKey" value="sb_publishable_tDw0VvUdJsLrETh25IKCRA_VG-telwP" >

        <label>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</label>
        <input type="date" id="birthDate" value="2015-03-15">
        
        <label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°:</label>
        <input type="text" id="fullName" value="‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ">
        
        <button onclick="testAPI()">‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API</button>
        
        <h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</h3>
        <pre id="result">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API...</pre>
    </div>

    <script>
        async function testAPI() {
            const anonKey = document.getElementById('anonKey').value;
            const birthDate = document.getElementById('birthDate').value;
            
            if (!anonKey) {
                alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà ANON KEY ‡∏Å‡πà‡∏≠‡∏ô!');
                return;
            }

            const response = await fetch(
                'https://oibubvhuiuurkxhnefsw.supabase.co/functions/v1/psychomatrix-calculate',
                {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${anonKey}`
                    },
                    body: JSON.stringify({ birth_date: birthDate })
                }
            );

            const data = await response.json();
            document.getElementById('result').textContent = JSON.stringify(data, null, 2);
        }
    </script>
</body>
</html>
